/**
 * サンプル記事3本を一括投入
 * 使い方: npx tsx scripts/seed-articles-batch.ts
 */

import 'dotenv/config';
import { initializeApp, cert } from 'firebase-admin/app';
import { getFirestore, FieldValue } from 'firebase-admin/firestore';
import { config } from 'dotenv';
config({ path: '.env.local' });

const projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;
if (!projectId) {
  console.error('NEXT_PUBLIC_FIREBASE_PROJECT_IDが設定されていません');
  process.exit(1);
}

let app;
if (process.env.GOOGLE_APPLICATION_CREDENTIALS) {
  app = initializeApp({ credential: cert(process.env.GOOGLE_APPLICATION_CREDENTIALS) });
} else {
  app = initializeApp({ projectId });
}

const db = getFirestore(app);
const ADMIN_EMAIL = 'mt.oikawa@gmail.com';

const articles = [
  {
    slug: 'how-to-choose-barrel',
    title: '【保存版】自分に合ったバレルの選び方 — 形状・カット・重さ完全ガイド',
    tags: ['バレル', '選び方', '初心者'],
    isDraft: false,
    coverImageUrl: null,
    content: `マイダーツを買おうとショップに行くと、壁一面に並んだバレルの数に圧倒されますよね。

この記事では、**バレルの形状・カット・重さ・素材**について体系的に解説します。自分のスタイルに合ったバレルを見つけるための参考にしてください。

---

## バレルの形状

バレルの形状は投げやすさに直結する、最も重要な要素です。大きく分けて5種類あります。

### トルピード型（初心者におすすめ）

前方が太く、後方に向かって細くなる流線形。**前重心**のため、手を出すだけで自然にダーツが飛んでくれます。

- グリップポジションが決めやすい
- 力のない人でもスムーズに飛ばせる
- プロプレイヤーの使用率も高い

> 「何を買えばいいかわからない」という方は、まずトルピードから試してみてください。

### ストレート型（中〜上級者向け）

バレル全体がほぼ同じ太さの直線形状。**グリップ位置を自由に変えられる**のが最大のメリットです。

- どこを持っても同じ太さなので、投げ方の自由度が高い
- グルーピング時にダーツ同士が弾かれにくい
- 正確なリリースが求められるため、初心者にはやや難しい

### 砲弾型（バレット型）

トルピードをさらに短くした形状。石を投げるような感覚でコントロールしやすいのが特徴です。

- 指の力が弱い方や、少ない指で持つ方に向いている
- 非常にコンパクトなので、持ち方が限定的な人に合う

### スタンダード型

中央が最も太い「ひし形」。押し投げにも引き投げにも対応できる汎用型ですが、商品の種類はやや少なめです。

### 逆トルピード型

後方が太い後ろ重心タイプ。投げる人をかなり選ぶ上級者向けです。

---

## カットの種類と効果

カット（バレル表面の刻み）は、**グリップ力と手離れ**に影響します。

| カット | 特徴 | こんな人向き |
|--------|------|-------------|
| **リングカット** | 横方向の溝。最もオーソドックス | 万人向け |
| **シャークカット** | 斜めのギザギザ。強い引っかかり | しっかり握りたい人 |
| **ピクセルカット** | 小さな四角の凹凸。均一な指触り | 繊細なグリップが好みの人 |
| **ダイヤモンドカット** | ダイヤ形の凹凸。ローレット調 | 昔ながらの握り心地が好きな人 |
| **マイクロカット** | 非常に細かい刻み。手離れ重視 | 指をスルッと抜きたい人 |
| **ノーグルーブ** | カットなし。究極のスムース | 上級者・手汗が少ない人 |

### カット選びのポイント

- **手汗が多い人** → シャークカットなど強めのカットがおすすめ
- **手離れを重視する人** → マイクロカットやノーグルーブ
- **迷ったら** → リングカットが無難

---

## 重さの選び方

ソフトダーツのバレル重量は**16g〜22g**が一般的。近年は重めの傾向です。

### 軽いバレル（16〜18g）

- ダーツがやや山なりに飛ぶ
- 繊細なコントロールが効く
- 力が弱い人でも扱いやすい
- 風の影響を受けやすい（ソフトダーツではあまり関係なし）

### 重いバレル（19〜22g）

- 直線的な弾道で飛ぶ
- リリースの多少のブレを重さが吸収してくれる
- 力まず投げられる人に向いている
- 力が弱いとボードに届かないことも

### 初心者へのおすすめ

まずは **18g 前後**から始めて、軽い方・重い方の両方を試してみてください。「投げていて気持ちいい」と感じる重さが正解です。

---

## 素材について

| 素材 | 密度 | 特徴 | 価格帯 |
|------|------|------|--------|
| **タングステン** | 高い | 細くて重いバレルが作れる。主流 | 5,000〜30,000円 |
| **ブラス（真鍮）** | 低い | 同じ重さだと太くなる。入門用 | 1,000〜3,000円 |
| **ステンレス** | 中程度 | ブラスより硬く耐久性あり | 2,000〜5,000円 |
| **チタン** | 低い | 非常に硬く軽い。特殊用途 | 10,000円〜 |

タングステンの含有率は **80%〜97%** が一般的。含有率が高いほど細く作れますが、価格も上がります。初心者は **タングステン80〜90%** で十分です。

---

## 太さ（最大径）の目安

- **6.0mm以下**: かなり細い。ストレートに多い
- **6.0〜6.8mm**: 標準的。幅広い形状
- **7.0mm以上**: 太め。トルピードや砲弾型に多い

太いバレルは握りやすいですが、ボードに3本近づけた時に干渉しやすくなります。細いバレルはグルーピング有利ですが、握り心地のフィット感は人を選びます。

---

## まとめ：バレル選びのフローチャート

1. **まずは形状を決める** → 迷ったらトルピード
2. **カットを選ぶ** → 迷ったらリングカット
3. **重さを試す** → 18g前後からスタート
4. **素材** → タングステン80〜90%

一番大事なのは**実際に握って投げてみること**。ダーツショップの試投コーナーを活用して、しっくりくるバレルを見つけましょう。Darts Lab のバレル検索でスペックを比較しながら候補を絞り込むのもおすすめです！`,
  },
  {
    slug: 'how-to-choose-shaft-and-flight',
    title: '【初心者向け】シャフトとフライトの選び方 — 長さ・素材・形状で飛びが変わる',
    tags: ['シャフト', 'フライト', '選び方', '初心者'],
    isDraft: false,
    coverImageUrl: null,
    content: `バレルに比べて地味な存在のシャフトとフライトですが、実は**ダーツの飛びを大きく左右する重要パーツ**です。

「バレルは良いの買ったのに、シャフトとフライトはなんとなく選んだ」という方、意外と多いのではないでしょうか？この記事では、シャフトとフライトの選び方を詳しく解説します。

---

## シャフトの役割

シャフトはバレルとフライトをつなぐ部品ですが、**ダーツの重心バランスと飛行姿勢**を決定づける重要なパーツです。

長さ・素材・形状の3つの要素があり、それぞれの組み合わせで飛びが大きく変わります。

---

## シャフトの長さ

シャフトの長さは飛びの軌道に直結します。

| 長さ | 目安 | 特徴 |
|------|------|------|
| **ショート** | 約19mm | 直線的でシャープな弾道。上級者向け |
| **インビト** | 約24mm | ショートとミディアムの中間。バランス型 |
| **ミディアム** | 約30mm | ふわっと山なりの安定した弾道 |
| **ロング** | 約36mm以上 | 非常にゆっくり安定して飛ぶ |

### 長さ選びのポイント

- **初心者** → インビトまたはミディアムがおすすめ。安定感があって投げやすい
- **力強く直線的に投げたい** → ショート
- **ふわっと放物線で投げたい** → ミディアム〜ロング

> 「シャフトが長い = フライトが遠くなる = フライトの補正効果が大きくなる」と思われがちですが、実は逆です。シャフトが長くなるとフライトの効果は相対的に小さくなります。

---

## シャフトの素材

素材によって耐久性・重さ・価格が異なります。

### プラスチック（ナイロン）

- **価格**: 200〜500円（3本）
- **特徴**: 最も安価で種類が豊富。折れやすいのが難点
- **おすすめ**: まずはこれで色々な長さを試すのが吉

### カーボン

- **価格**: 2,000〜3,000円（3本）
- **特徴**: 非常に折れにくく丈夫。プラスチックの上位互換
- **おすすめ**: 長さが決まったらカーボンに移行するとコスパ良し

### アルミニウム

- **価格**: 500〜1,500円（3本）
- **特徴**: 金属製で折れないが、曲がりやすい。Oリング装着タイプ
- **おすすめ**: フライトの抜けが気になる方に

### チタン

- **価格**: 8,000〜12,000円（3本）
- **特徴**: 最軽量かつ最高硬度。一生モノの耐久性
- **おすすめ**: こだわり派の上級者向け

---

## シャフトの形状

| 形状 | 特徴 |
|------|------|
| **ストレート** | 標準形状。迷ったらこれ |
| **スリム** | やや細め。空気抵抗が少ない |
| **ハイブリッド** | ストレートとスリムの中間 |

基本は**ストレート**で問題ありません。プロ選手もストレートが最も多いです。

---

## フライトの選び方

フライトはダーツの「羽」で、**飛行中の姿勢を安定させる**役割を持っています。

### フライトの形状

| 形状 | 面積 | 特徴 |
|------|------|------|
| **スタンダード** | 大 | 最も空気抵抗が大きい。安定重視 |
| **シェイプ** | 中 | スタンダードの角を落とした形。バランス型 |
| **スリム** | 小 | 空気抵抗が少なく直線的に飛ぶ |
| **ティアドロップ** | 中〜小 | 涙型。シェイプよりさらにシャープ |

### 初心者向けの選び方

- **まずはスタンダード**から始めてください
- 安定してまっすぐ飛ぶようになったら、シェイプやスリムを試してみる
- フライトが大きいほど「ダーツが上を向きやすく」なるので、投げ方とのバランスが大事

---

## シャフトとフライトの組み合わせ

実はシャフトとフライトは**セットで考える**のが重要です。

| 組み合わせ | 飛び方 | 向いている人 |
|-----------|--------|-------------|
| ロングシャフト + スタンダード | 超安定・ゆったり | 初心者・山なり投げ |
| インビト + シェイプ | バランス型 | 万人向け |
| ショート + スリム | シャープ・直線的 | 上級者・直線投げ |

### 一体型：CONDOR AXE

シャフトとフライトが一体になった「CONDOR AXE」も人気です。

- フライトが外れるストレスがゼロ
- 組み合わせの迷いがない
- 種類も豊富で、シャフト長と形状を選べる

> Darts Lab のセッティング登録では CONDOR AXE にも対応しています。シャフトとフライトをまとめて選択できるので試してみてください。

---

## まとめ

| パーツ | 初心者おすすめ | 慣れてきたら |
|--------|--------------|-------------|
| シャフト長 | インビト | 好みで調整 |
| シャフト素材 | プラスチック | カーボン |
| フライト形状 | スタンダード | シェイプ or スリム |

シャフトとフライトは**安価で交換しやすい**ので、どんどん試して自分の投げ方に合う組み合わせを見つけましょう。バレルを変えるより手軽にセッティングを調整できるパーツです！`,
  },
  {
    slug: 'useful-darts-accessories',
    title: '持っておくと捗る！ダーツの便利グッズ・小物まとめ',
    tags: ['グッズ', 'アクセサリー', '便利', '初心者'],
    isDraft: false,
    coverImageUrl: null,
    content: `マイダーツを買ったら次に気になるのが周辺グッズ。「何を買えばいいの？」という方のために、**優先度別にダーツの便利グッズ**をまとめました。

全部揃える必要はないので、自分のスタイルに合わせて少しずつ揃えていきましょう。

---

## 優先度 ★★★ — ほぼ必須

### ダーツケース

マイダーツの持ち運びと保護に必須。カバンの中でフライトが曲がったり、チップが折れたりするのを防いでくれます。

**選び方のポイント:**
- コンパクトさ重視 → ドロップインタイプ（そのまま入れるだけ）
- 予備パーツも入れたい → ウォレットタイプ（収納力あり）
- 複数セット持ち歩く → 大容量タイプ

### ダーツカード（DARTSLIVE / PHOENIX）

自分の成績を記録するために必要です。Rating や対戦履歴が残るので、成長が実感できます。

- **DARTSLIVE カード**: DARTSLIVE 系の筐体に対応
- **PHOENIX カード**: PHOENIX 系の筐体に対応

行きつけのお店の筐体に合わせて選びましょう。最近はスマホアプリ連携もできます。

---

## 優先度 ★★☆ — ガチ勢なら欲しい

### チップケース

消耗品であるチップの予備を持ち運ぶケース。試合中にチップが折れたとき、すぐ交換できます。

- ダーツケースにぶら下げられるキーホルダータイプが便利
- 30〜50本くらい入る筒型が人気

### シャフトリムーバー

バレルの中に折れたシャフトやチップが詰まったとき、取り出すための工具。**お店に置いてないことも多い**ので、自分で1本持っておくと安心です。

- ペンチ型とスクリュー型がある
- スクリュー型が使いやすくておすすめ

### フライトケース

フライトを綺麗な状態で持ち運ぶためのケース。特に折り畳みではないフライト（成型フライト以外）を使っている方には必須級。

- キーホルダータイプでダーツケースに付けられるものが便利
- 2〜4枚のフライトを収納できるものが多い

### アームサポーター

長時間の練習で腕が疲れるのを軽減してくれます。着圧タイプは投げのブレも抑えてくれる効果があります。

- ファイテンの「アクアチタンアームサポーター」が定番
- 大会で使っているプロも多い

---

## 優先度 ★☆☆ — あると便利

### バレル洗浄液

使い続けるとバレルのカットに手垢や皮脂が溜まり、グリップ感が落ちてきます。定期的に洗浄して新品のような握り心地を取り戻しましょう。

**お手入れ方法:**
1. 洗浄液に数分漬け置き
2. 歯ブラシで軽くこする
3. 水で洗い流して乾燥

専用品が高いと感じる方は、食器用洗剤 + ぬるま湯でもOKです。

### グリップアイテム（滑り止め）

手汗でバレルが滑る方の強い味方。粉末タイプ・クリームタイプ・スプレータイプがあります。

| タイプ | 特徴 | 代表商品 |
|--------|------|---------|
| 粉末 | さらさら。効果が長持ち | ロージン |
| クリーム | しっとり。塗りすぎ注意 | ディークラフト ダーツグリップ |
| スプレー | 手軽。乾きが早い | グリップスプレー各種 |

### コンバージョンポイント

ソフトダーツのバレルにスティールのポイントを付けるアダプター。ハードダーツボードで練習したいときに便利です。

- 既存のソフトバレルをそのまま使える
- 家でハードボード練習 → お店でソフトダーツ、の切り替えがスムーズ

### フライトパンチ

折り畳みフライトにシャフトを通す穴を開ける道具。成型フライトには不要ですが、折り畳みフライト派には必須です。

### ダーツボード（家練習用）

家で練習したい方には、ソフトダーツボードまたはハードダーツボードの設置がおすすめ。

- **ソフトダーツボード**: DARTSLIVE Home など。アプリ連携できるものが人気
- **ハードダーツボード**: 刺さる音が静か。集合住宅向き
- **サラウンド**: ボード周りの壁を守るクッション。賃貸の方は必須

---

## 番外編：100均で代用できるもの

意外と100円ショップで使えるアイテムがあります。

- **歯ブラシ立て** → ダーツスタンド代わりに（投げる前にダーツを立てておける）
- **携帯用灰皿** → チップケースの代用
- **メガネケース** → 簡易ダーツケースとして
- **小物入れポーチ** → フライトや予備パーツの収納に

専用品を買う前に、まずは100均で試してみるのもアリです。

---

## まとめ：買う順番の目安

| 順番 | アイテム | 予算 |
|------|---------|------|
| 1 | ダーツケース | 1,500〜4,000円 |
| 2 | ダーツカード | 500〜1,500円 |
| 3 | チップケース | 300〜800円 |
| 4 | シャフトリムーバー | 500〜1,500円 |
| 5 | フライトケース | 300〜1,000円 |
| 6 | バレル洗浄液 | 500〜1,500円 |
| 7 | お好みで追加 | — |

まずはケースとカードを揃えて、あとは必要に応じて買い足していくのがおすすめです。Darts Lab でセッティングを登録して、他のプレイヤーがどんなアクセサリーを使っているか参考にしてみてくださいね！`,
  },
];

async function seedArticles() {
  // 管理者ユーザーを取得
  const snapshot = await db.collection('users').where('email', '==', ADMIN_EMAIL).get();

  let userId = '';
  let userName = '';
  if (!snapshot.empty) {
    const userDoc = snapshot.docs[0];
    userId = userDoc.id;
    userName = userDoc.data().displayName || '';
    console.log(`管理者ユーザ: ${userName} (${userId})`);
  } else {
    console.warn('管理者ユーザが見つかりません。userId空で作成します');
  }

  for (const article of articles) {
    const docRef = db.collection('articles').doc();
    await docRef.set({
      ...article,
      userId,
      userName,
      createdAt: FieldValue.serverTimestamp(),
      updatedAt: FieldValue.serverTimestamp(),
    });
    console.log(`✓ ${article.title}`);
    console.log(`  → /articles/${article.slug}`);
  }

  console.log(`\n${articles.length}件の記事を作成しました`);
}

seedArticles().catch((err) => {
  console.error('エラー:', err);
  process.exit(1);
});
