# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [3.1.0] - 2026-03-01

### Added

- **PHOENIX 換算ページ** — DARTSLIVE スタッツから PHOENIX レーティングに換算 + 比較機能
- **COUNT-UP セッション間比較分析** — 30G 以上の有効セッションで前回/今回の差分分析
- **LINE COUNT-UP 通知** — CU プレイがある日は自動通知
- **LINE 練習メモ機能** — 「メモ」コマンドで次回スタッツに紐づけ
- **LINE リッチメニュー自動セットアップスクリプト**
- **LINE ボットアイコン生成スクリプト**
- **LINE ヘルプコマンド**

### Changed

- **グラフツールチップをダーク/ライトモード両対応に統一** — 共通 `useChartTheme` hook で全 17 チャートコンポーネントのツールチップ・軸ラベル・グリッド線を統一

### Fixed

- **LINE 通知のレーティング精度改善**
- **COUNT-UP 分析の期間タブ「直近」自動検出**
- **コード品質・セキュリティ改善**（11 項目）

## [3.0.0] - 2026-02-21

### Added

- **XP / 経験値システム** — 14 種の XP ルール、日次 Cron 自動付与、30 段階ランク、12 種の実績、XP 獲得条件一覧表示
- **カレンダービュー** — プレイ履歴をカレンダー形式で可視化、ダイアログ化対応
- **週次/月次レポート** — LINE Flex Message 自動配信（前期間比較付き）
- **マイショップ** — DARTSLIVE サーチ URL 貼り付けで店名・住所・駅・画像を自動取得、タグフィルター（台数・禁煙・投げ放題等）、お気に入り・リスト管理
- **目標トラッキング** — 月間/年間/デイリー目標設定、DARTSLIVE スタッツからリアルタイム進捗計算、達成時 XP 付与+紙吹雪演出
- **通知センター** — アプリ内通知一覧、SEO 改善
- **01 分析** — 01 ゲームの詳細統計分析
- **COUNT-UP 分析** — COUNT-UP 統計追加、累積保存で当日プレイなしでも表示
- **セッティング比較** — ダーツセッティング並列比較機能
- **新規登録一時停止機能** — 管理者が新規ユーザー登録を一時的に停止可能
- **セッティング共有 OGP** — OGP 画像自動生成 & X シェアボタン
- **ブル履歴トラッキング** — ブル統計グラフ、パーセンタイル強化
- **ゲーム数自動取得** — DARTSLIVE からゲーム数を自動取得

### Changed

- **ヘッダードロップダウン化** — メニューをドロップダウン形式に整理、導線改善
- **ダークモード FOUC 解消** — ダークモード切替時のチラつき（FOUC）を完全解消
- **スタッツ画面リファクタ** — 14 コンポーネントに分割、7 つの新機能追加、レスポンシブ対応強化
- **LINE 連携強化** — 管理者限定化、スタッツ拡張、オンデマンド取得対応
- **README 圧縮** — スクリーンショット更新、テキスト最適化
- **ホーム画面リッチ化** — 使用中ダーツのバレル重量タグ表示、ディスカッション表示
- **画像プロキシ統一** — バレル画像を wsrv.nl プロキシ経由に統一

### Fixed

- **スクレイピング安定化** — DARTSLIVE セレクタ修正、プロフィール画像取得改善、chromium バンドル分離
- **画像プロキシ** — ショップ画像・バレル画像のプロキシ経由表示
- **COUNT-UP 累積保存** — 当日プレイなしでもデータ表示可能に
- **フォーマット統一** — Prettier フォーマット全ファイル適用
- **ショップ URL 取得** — HTML 解析修正、住所・最寄り駅解析の改行対応
- **バレル検索ブックマーク** — 検索後のブックマーク状態管理リファクタ
- **Firebase Storage** — アップロードパスをセキュリティルールに一致
- **セキュリティ脆弱性修正** — CRITICAL 2 件 + HIGH 5 件 + MEDIUM 4 件を修正

## [2.0.0] - 2026-02-13

### Added

- **Stripe 課金** — サブスクリプション導入、PRO プラン、Webhook 連携
- **オンボーディング** — 新規ユーザー向けガイド
- **スケルトンローダー** — ページ読み込み時の UX 改善
- **アクセシビリティ改善** — ARIA 属性、キーボードナビゲーション対応
- **品質基盤** — テスト追加、ミドルウェア整備、パフォーマンス改善、エラー監視（Sentry）

### Changed

- **セキュリティ強化** — CSP、レートリミット、入力バリデーション追加
- **PRO 価値改善** — PRO 限定機能の拡充

### Fixed

- **Sentry 設定** — Next.js instrumentation file への移行
- **DialogTitle hydration エラー** — h2 > h5 ネスト違反を修正

## [1.1.0] - 2026-02-12

### Added

- **記事システム拡張** — 固定ページ、X 埋め込み対応
- **DARTSLIVE 同意 UI** — スタッツ連携時の同意フロー

## [1.0.0] - 2026-02-12

### Added

- **プロジェクト基盤** — Next.js + Firebase + NextAuth + MUI による初期構築
- **ユーザー認証** — ログイン / 新規登録
- **セッティング管理** — CRUD / 比較 / ソーシャル機能（いいね・コメント）
- **バレルデータベース** — 7,000 種以上、検索 / フィルタ / インポート
- **スタッツ記録** — DARTSLIVE 連携 / グラフ / 手動入力
- **バレルシミュレーター** — 画像ベースの実寸比較
- **診断クイズ** — 好みに合ったバレルを提案
- **おすすめバレル** — スコアリングベースのレコメンドエンジン
- **アフィリエイト連携** — 6 ショップ対応
- **PWA 対応** — Service Worker オフラインキャッシュ
- **LINE Bot 連携** — 自動スタッツ検知、LINE からの記録入力
- **ロールベース権限** — admin / pro / general の 3 段階
- **記事システム** — Markdown ベースの公式コンテンツ
- **セッティング履歴** — 変更履歴の記録・閲覧
- **廃盤管理** — バレルの廃盤状態管理、フィルタ拡張
- **スタッツ画面リッチ化** — アワード、期間別スタッツ
- **カウントアップスコア色付け** — 01 期待値ベースの色分け表示
- **ランキング** — バレル売上ランキング

[3.1.0]: https://github.com/seiryuu1215/darts-app/compare/v3.0.0...v3.1.0
[3.0.0]: https://github.com/seiryuu1215/darts-app/compare/v2.0.0...v3.0.0
[2.0.0]: https://github.com/seiryuu1215/darts-app/compare/v1.1.0...v2.0.0
[1.1.0]: https://github.com/seiryuu1215/darts-app/compare/v1.0.0...v1.1.0
[1.0.0]: https://github.com/seiryuu1215/darts-app/releases/tag/v1.0.0
