# åŸºæœ¬è¨­è¨ˆæ›¸

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±

| é …ç›®           | å†…å®¹       |
| -------------- | ---------- |
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå | Darts Lab  |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³     | 3.0        |
| ä½œæˆæ—¥         | 2025-02-09 |
| æœ€çµ‚æ›´æ–°æ—¥     | 2026-03-01 |

---

## ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¨­è¨ˆå›³

ä»¥ä¸‹ã®7ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¨­è¨ˆå›³ã‚’ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
ã‚¯ãƒªãƒƒã‚¯æ“ä½œã§è©³ç´°è¡¨ç¤ºãƒ»ã‚¿ãƒ–åˆ‡æ›¿ãŒå¯èƒ½ãª SVG ãƒ™ãƒ¼ã‚¹ã®è¨­è¨ˆå›³ã§ã™ã€‚

**[è¨­è¨ˆå›³ãƒ“ãƒ¥ãƒ¼ã‚¢ â†’ https://portfolio-seiryuu.vercel.app/projects/darts-lab](https://portfolio-seiryuu.vercel.app/projects/darts-lab)**

| è¨­è¨ˆå›³ | å†…å®¹ |
|---|---|
| ğŸ“ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | Client â†’ Vercel â†’ Firebase â†’ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨ä½“æ§‹æˆ |
| ğŸ—„ï¸ ERå›³ | Firestore 12ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ + 11ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ + ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| ğŸ” èªè¨¼ãƒ»èª²é‡‘ | NextAuth JWT ãƒ•ãƒ­ãƒ¼ / Stripe Webhook / LINEé€£æº |
| â° Cronãƒãƒƒãƒ | æ—¥æ¬¡è‡ªå‹•ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆ9ã‚¹ãƒ†ãƒƒãƒ— + XPãƒ«ãƒ¼ãƒ«14ç¨®ï¼‰ |
| ğŸ“± ç”»é¢é·ç§» | 30+ãƒšãƒ¼ã‚¸ Ã— ãƒ­ãƒ¼ãƒ«åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ |
| ğŸ”„ APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ | 25+ APIãƒ«ãƒ¼ãƒˆ / ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼ |
| ğŸ“‹ è¦ä»¶ãƒ»ãƒšãƒ«ã‚½ãƒŠ | æ©Ÿèƒ½ãƒãƒƒãƒ— / ãƒšãƒ«ã‚½ãƒŠ / éæ©Ÿèƒ½è¦ä»¶ / æŠ€è¡“é¸å®š |

> TSXã‚½ãƒ¼ã‚¹ã¯ [`docs/diagrams/`](./diagrams/) ã«åéŒ²ã€‚

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Next.js App Router (React 19)              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚ MUI v7   â”‚ â”‚ Recharts â”‚ â”‚ Tailwind CSS v4  â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ Leaflet (åœ°å›³)    â”‚ â”‚ Capacitor (iOS)        â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Vercel Platform                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Edge Network   â”‚  â”‚  Serverless Functions                â”‚ â”‚
â”‚  â”‚  (CDN/SSR)      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  + Serwist PWA  â”‚  â”‚  â”‚ API Routes                     â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/auth/[...nextauth]       â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/dartslive-stats           â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/proxy-image               â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/stripe/*                  â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/line/*                    â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/cron/*                    â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/goals                     â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/progression               â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/notifications              â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/stats-history              â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/stats-calendar             â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/og                        â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/shops/*                   â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/n01-import                â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/admin/dartslive-sync      â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/admin/dartslive-history   â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/admin/update-role         â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚  /api/admin/update-pricing      â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                  â”‚                â”‚
     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Firebase   â”‚    â”‚ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹      â”‚  â”‚ ã‚¤ãƒ³ãƒ•ãƒ©          â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
     â”‚ â”‚  Auth  â”‚ â”‚    â”‚ â”‚ DARTSLIVE    â”‚ â”‚  â”‚ â”‚ Sentry       â”‚ â”‚
     â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”‚ card.dartsliveâ”‚ â”‚  â”‚ â”‚ (ã‚¨ãƒ©ãƒ¼ç›£è¦–)  â”‚ â”‚
     â”‚ â”‚Firestoreâ”‚ â”‚    â”‚ â”‚ .com         â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
     â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”‚ Upstash Redisâ”‚ â”‚
     â”‚ â”‚Storage â”‚ â”‚    â”‚ â”‚ Google OAuth â”‚ â”‚  â”‚ â”‚ (ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆ)â”‚ â”‚
     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚ Stripe       â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ â”‚ (æ±ºæ¸ˆ)        â”‚ â”‚
                       â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
                       â”‚ â”‚ LINE         â”‚ â”‚
                       â”‚ â”‚ Messaging APIâ”‚ â”‚
                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡

### 2.1 å…¨ä½“æ–¹é‡

| æ–¹é‡                           | èª¬æ˜                                                                |
| ------------------------------ | ------------------------------------------------------------------- |
| ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹                   | Vercel Serverless Functions + Firebase ã§ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ä¸è¦           |
| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | 'use client' ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸­å¿ƒã€‚èªè¨¼çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹ãƒšãƒ¼ã‚¸ãŒå¤šã„ãŸã‚ |
| BaaSæ´»ç”¨                       | Firebase (Auth/Firestore/Storage) ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ã‚’æœ€å°åŒ–        |
| å‹å®‰å…¨                         | TypeScript ã«ã‚ˆã‚‹å‹å®šç¾©ã®ä¸€å…ƒç®¡ç†                                   |

### 2.2 ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤                  â”‚
â”‚  app/          â†’ ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ  â”‚
â”‚  components/   â†’ å†åˆ©ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤                    â”‚
â”‚  lib/          â†’ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»è¨ˆç®—   â”‚
â”‚  app/api/      â†’ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤                      â”‚
â”‚  lib/firebase.ts       â†’ Client SDK  â”‚
â”‚  lib/firebase-admin.ts â†’ Admin SDK   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‹å®šç¾©å±¤                             â”‚
â”‚  types/        â†’ å…±é€šå‹å®šç¾©            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æŠ€è¡“é¸å®šã¨ç†ç”±

### 3.1 ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»è¨€èª

| æŠ€è¡“           | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”±                                                                       |
| -------------- | ---------- | ------------------------------------------------------------------------------ |
| **Next.js**    | 16.1       | App Router ã«ã‚ˆã‚‹ç›´æ„Ÿçš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€Vercel ã¨ã®è¦ªå’Œæ€§ã€SSR/SSG ã®æŸ”è»Ÿãªé¸æŠ |
| **React**      | 19         | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹UIã€è±Šå¯Œãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€Server Componentså¯¾å¿œ              |
| **TypeScript** | 5          | å‹å®‰å…¨ã«ã‚ˆã‚‹ãƒã‚°é˜²æ­¢ã€IDEè£œå®Œã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®¹æ˜“æ€§                          |

### 3.2 UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| æŠ€è¡“                  | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”±                                                                           |
| --------------------- | ---------- | ---------------------------------------------------------------------------------- |
| **MUI (Material UI)** | 7          | è±Šå¯Œãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤ã€ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã€æ—¥æœ¬èªå…¥åŠ›ã¨ã®è¦ªå’Œæ€§ |
| **Tailwind CSS**      | 4          | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ã®è¿…é€Ÿãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã€MUI ã¨ä½µç”¨ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ã«åˆ©ç”¨         |
| **Emotion**           | 11         | MUI ã®CSS-in-JSã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆMUIä¾å­˜ï¼‰                                                 |

### 3.3 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

| æŠ€è¡“                   | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”±                                                                                                            |
| ---------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------- |
| **Firebase Auth**      | 12         | ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ + Google OAuth ã®çµ±åˆèªè¨¼åŸºç›¤ã€NextAuth.jsã¨ã®é€£æºå®Ÿç¸¾                                            |
| **Cloud Firestore**    | 12         | NoSQLã§ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¹ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯¾å¿œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ |
| **Firebase Storage**   | 12         | ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€CDNé…ä¿¡ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«                                                                       |
| **Firebase Admin SDK** | 13         | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®Firestoreã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãƒã‚¤ãƒ‘ã‚¹ï¼‰                                                   |

### 3.4 èªè¨¼

| æŠ€è¡“            | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”±                                                                                               |
| --------------- | ---------- | ------------------------------------------------------------------------------------------------------ |
| **NextAuth.js** | 4          | Next.jsæ¨™æº–ã®èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€JWT/Sessionç®¡ç†ã€è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€å¯¾å¿œã€ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè£…å®¹æ˜“æ€§ |

### 3.5 ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–

| æŠ€è¡“         | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”±                                                                                        |
| ------------ | ---------- | ----------------------------------------------------------------------------------------------- |
| **Recharts** | 3          | Reactå‘ã‘è»½é‡ãƒãƒ£ãƒ¼ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã€LineChart/BarChart/ComposedChartã®è±Šå¯Œãªç¨®é¡ |

### 3.6 ãã®ä»–

| æŠ€è¡“                             | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€”ãƒ»é¸å®šç†ç”±                                        |
| -------------------------------- | ---------- | ----------------------------------------------------- |
| **ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–** | 24         | DARTSLIVEãƒ‡ãƒ¼ã‚¿å–å¾—ç”¨ï¼ˆãƒ‡ãƒ¼ã‚¿é€£æºæ‰‹æ®µãŒé™å®šçš„ãªãŸã‚ï¼‰ |
| **Stripe**                       | 20         | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ±ºæ¸ˆ                                |
| **LINE Messaging API**           | -          | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºãƒ»æ—¥æ¬¡é€šçŸ¥                              |
| **Sentry**                       | 10         | ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»ä¾‹å¤–è¿½è·¡                                  |
| **Capacitor**                    | 8          | iOSãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒª                                   |
| **Leaflet / react-leaflet**      | -          | åœ°å›³è¡¨ç¤ºï¼ˆã‚·ãƒ§ãƒƒãƒ—ãƒãƒƒãƒ—ï¼‰                            |
| **Upstash Redis**                | -          | åˆ†æ•£ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆ                                    |
| **Serwist**                      | -          | PWA / Service Worker                                  |
| **Vitest**                       | 4          | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ                                        |
| **Storybook**                    | 10         | UIãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°                      |
| **zod**                          | 4          | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³                                        |
| **react-markdown**               | 10         | è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®Markdownãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆGFMå¯¾å¿œï¼‰       |
| **Sharp**                        | 0.34       | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ç”»åƒæœ€é©åŒ–                              |

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 4.1 Firestore ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

```
Firestore Root
â”‚
â”œâ”€â”€ users/{userId}
â”‚   â”‚  displayName: string
â”‚   â”‚  email: string
â”‚   â”‚  photoURL: string | null
â”‚   â”‚  avatarUrl: string | null
â”‚   â”‚  height: number | null
â”‚   â”‚  fourStanceType: "A1" | "A2" | "B1" | "B2" | null
â”‚   â”‚  throwingImage: string | null
â”‚   â”‚  dominantEye: string | null
â”‚   â”‚  gripType: string | null
â”‚   â”‚  role: "admin" | "pro" | "general"
â”‚   â”‚  activeSoftDartId: string | null
â”‚   â”‚  activeSteelDartId: string | null
â”‚   â”‚  createdAt: Timestamp
â”‚   â”‚  updatedAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ barrelBookmarks/{barrelId}
â”‚   â”‚     barrelId: string
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ dartBookmarks/{dartId}
â”‚   â”‚     dartId: string
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ dartLikes/{dartId}
â”‚   â”‚     dartId: string
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ dartsLiveStats/{docId}
â”‚   â”‚     date: Timestamp
â”‚   â”‚     rating: number
â”‚   â”‚     gamesPlayed: number
â”‚   â”‚     zeroOneStats: { ppd, avg, highOff }
â”‚   â”‚     cricketStats: { mpr, highScore }
â”‚   â”‚     bullRate: number | null
â”‚   â”‚     hatTricks: number | null
â”‚   â”‚     condition: 1-5
â”‚   â”‚     memo: string
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚     updatedAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ dartsliveCache/latest
â”‚   â”‚     rating, ratingInt, flight, cardName
â”‚   â”‚     stats01Avg, statsCriAvg, statsPraAvg
â”‚   â”‚     prevRating, prevStats01Avg, prevStatsCriAvg, prevStatsPraAvg
â”‚   â”‚     updatedAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ shopBookmarks/{bookmarkId}
â”‚   â”‚     shopId: string
â”‚   â”‚     listId: string | null
â”‚   â”‚     tags: string[]
â”‚   â”‚     memo: string
â”‚   â”‚     rating: number | null
â”‚   â”‚     visited: boolean
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚     updatedAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ shopLists/{listId}
â”‚   â”‚     name: string
â”‚   â”‚     order: number
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ goals/{goalId}
â”‚   â”‚     type: string
â”‚   â”‚     targetValue: number
â”‚   â”‚     currentValue: number
â”‚   â”‚     status: "active" | "achieved" | "expired"
â”‚   â”‚     deadline: Timestamp | null
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚     updatedAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ notifications/{notificationId}
â”‚   â”‚     type: string
â”‚   â”‚     title: string
â”‚   â”‚     body: string
â”‚   â”‚     read: boolean
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â”œâ”€â”€ xpHistory/{xpId}
â”‚   â”‚     amount: number
â”‚   â”‚     reason: string
â”‚   â”‚     createdAt: Timestamp
â”‚   â”‚
â”‚   â””â”€â”€ settingHistory/{historyId}
â”‚         dartId: string
â”‚         changedFields: object
â”‚         createdAt: Timestamp
â”‚
â”œâ”€â”€ darts/{dartId}
â”‚     userId: string
â”‚     userName: string
â”‚     userAvatarUrl: string | null
â”‚     title: string
â”‚     barrel: { name, brand, weight, maxDiameter, length, cut }
â”‚     tip: { name, type, lengthMm, weightG }
â”‚     shaft: { name, lengthMm, weightG }
â”‚     flight: { name, shape, weightG, isCondorAxe, condorAxeShaftLengthMm }
â”‚     imageUrls: string[]
â”‚     description: string
â”‚     likeCount: number
â”‚     isDraft: boolean
â”‚     sourceBarrelId: string | null
â”‚     createdAt: Timestamp
â”‚     updatedAt: Timestamp
â”‚
â”œâ”€â”€ comments/{commentId}
â”‚     dartId: string
â”‚     userId: string
â”‚     userName: string
â”‚     userAvatarUrl: string | null
â”‚     text: string
â”‚     createdAt: Timestamp
â”‚
â”œâ”€â”€ barrels/{barrelId}
â”‚     name: string
â”‚     brand: string
â”‚     weight: number
â”‚     maxDiameter: number
â”‚     length: number
â”‚     cut: string
â”‚     imageUrl: string | null
â”‚     productUrl: string | null
â”‚     source: string
â”‚     importedAt: Timestamp
â”‚
â”œâ”€â”€ articles/{articleId}
â”‚     slug: string
â”‚     title: string
â”‚     content: string (Markdown)
â”‚     coverImageUrl: string | null
â”‚     tags: string[]
â”‚     isDraft: boolean
â”‚     isFeatured: boolean
â”‚     userId: string
â”‚     userName: string
â”‚     createdAt: Timestamp
â”‚     updatedAt: Timestamp
â”‚
â”œâ”€â”€ discussions/{discussionId}
â”‚     title: string
â”‚     body: string
â”‚     category: string
â”‚     userId: string
â”‚     userName: string
â”‚     userAvatarUrl: string | null
â”‚     replyCount: number
â”‚     createdAt: Timestamp
â”‚     updatedAt: Timestamp
â”‚
â”œâ”€â”€ replies/{replyId}
â”‚     discussionId: string
â”‚     userId: string
â”‚     userName: string
â”‚     userAvatarUrl: string | null
â”‚     body: string
â”‚     createdAt: Timestamp
â”‚
â”œâ”€â”€ stripeEvents/{eventId}
â”‚     type: string
â”‚     data: object
â”‚     processedAt: Timestamp
â”‚
â”œâ”€â”€ lineConversations/{conversationId}
â”‚     userId: string
â”‚     lineUserId: string
â”‚     messages: array
â”‚     updatedAt: Timestamp
â”‚
â”œâ”€â”€ lineLinkCodes/{code}
â”‚     userId: string
â”‚     createdAt: Timestamp
â”‚     expiresAt: Timestamp
â”‚
â”œâ”€â”€ config/{configId}
â”‚     ï¼ˆã‚¢ãƒ—ãƒªè¨­å®šãƒ»ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ç­‰ï¼‰
â”‚
â”œâ”€â”€ barrelRanking/{rankingId}
â”‚     barrelId: string
â”‚     score: number
â”‚     updatedAt: Timestamp
â”‚
â”œâ”€â”€ shopBookmarks/{bookmarkId}
â”‚     ï¼ˆãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚·ãƒ§ãƒƒãƒ—ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯é›†è¨ˆç”¨ï¼‰
â”‚
â””â”€â”€ shopLists/{listId}
      ï¼ˆãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚·ãƒ§ãƒƒãƒ—ãƒªã‚¹ãƒˆé›†è¨ˆç”¨ï¼‰
```

### 4.2 è¨­è¨ˆæ–¹é‡

| æ–¹é‡                       | èª¬æ˜                                                                                     |
| -------------------------- | ---------------------------------------------------------------------------------------- |
| **éæ­£è¦åŒ–**               | ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ã‚¢ãƒã‚¿ãƒ¼ã‚’å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åŸ‹ã‚è¾¼ã¿ï¼ˆFirestoreã¯joinãŒé«˜ã‚³ã‚¹ãƒˆãªãŸã‚ï¼‰        |
| **ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**       | ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ»ã„ã„ã­ãƒ»ã‚¹ã‚¿ãƒƒãƒ„ãƒ»ç›®æ¨™ãƒ»é€šçŸ¥ï¼‰ã¯ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§åˆ†é›¢ |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | `dartsliveCache/latest` ã§æœ€æ–°ã‚¹ã‚¿ãƒƒãƒ„ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ã‚’é«˜é€ŸåŒ–     |

---

## 5. èªè¨¼ãƒ»èªå¯è¨­è¨ˆ

### 5.1 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼                   NextAuth.js              Firebase Auth
  â”‚                           â”‚                         â”‚
  â”‚â”€â”€â”€ ãƒ­ã‚°ã‚¤ãƒ³è¦æ±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                         â”‚
  â”‚   (email + password)      â”‚                         â”‚
  â”‚                           â”‚â”€â”€ signInWithEmail... â”€â”€â†’â”‚
  â”‚                           â”‚                         â”‚â”€â”€ èªè¨¼çµæœ â”€â”€â†’
  â”‚                           â”‚â†â”€â”€ uid + token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                         â”‚
  â”‚                           â”‚â”€â”€ Firestore: users/{uid} å–å¾— â”€â”€â†’
  â”‚                           â”‚â†â”€â”€ role å–å¾— â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                         â”‚
  â”‚â†â”€â”€ JWT (sub=uid, role) â”€â”€â”€â”‚                         â”‚
  â”‚   Set-Cookie              â”‚                         â”‚
```

### 5.2 èªå¯ãƒãƒˆãƒªã‚¯ã‚¹

> è©³ç´°ãªæ©Ÿèƒ½åˆ¥ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹ã¯ **[ROLES-AND-PLANS.md](./ROLES-AND-PLANS.md)** ã‚’å‚ç…§ã€‚

**æ¦‚è¦:** 3ãƒ­ãƒ¼ãƒ«ï¼ˆ`admin` / `pro` / `general`ï¼‰+ æœªãƒ­ã‚°ã‚¤ãƒ³ã€‚æ¨©é™åˆ¤å®šã¯ `lib/permissions.ts` ã«ä¸€å…ƒåŒ–ã€‚

---

## 6. å¤–éƒ¨é€£æºè¨­è¨ˆ

### 6.1 DARTSLIVEã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æº

```
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ            API Route           Browser Automation      DARTSLIVE
   â”‚                     â”‚                      â”‚                   â”‚
   â”‚â”€â”€ POST /api/ â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚                   â”‚
   â”‚  {email, password}  â”‚â”€â”€ launch browser â”€â”€â”€â†’â”‚                   â”‚
   â”‚                     â”‚                      â”‚â”€â”€ login â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                     â”‚                      â”‚â†â”€â”€ session cookie â”€â”‚
   â”‚                     â”‚                      â”‚â”€â”€ GET /play/ â”€â”€â”€â”€â†’â”‚
   â”‚                     â”‚                      â”‚â†â”€â”€ HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                     â”‚                      â”‚â”€â”€ GET /monthly â”€â”€â†’â”‚
   â”‚                     â”‚                      â”‚â†â”€â”€ HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                     â”‚                      â”‚â”€â”€ GET /playdata â”€â†’â”‚
   â”‚                     â”‚                      â”‚â†â”€â”€ HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                     â”‚â†â”€â”€ fetched data â”€â”€â”€â”€â”€â”‚                   â”‚
   â”‚                     â”‚â”€â”€ close browser â”€â”€â”€â”€â†’â”‚                   â”‚
   â”‚                     â”‚                      â”‚                   â”‚
   â”‚                     â”‚â”€â”€ Firestore save â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚â†â”€â”€ JSON response â”€â”€â”‚                      â”‚                   â”‚
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–:**
ï¼ˆè©³ç´°ã¯ [05-security-review.md Â§2.9](./05-security-review.md#29-dartslive-ãƒ‡ãƒ¼ã‚¿é€£æºã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£) ã‚’å‚ç…§ï¼‰

- èªè¨¼æƒ…å ±ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã§å—ä¿¡ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¡ãƒ¢ãƒªä¸Šã§ä¸€æ™‚åˆ©ç”¨ã®ã¿
- èªè¨¼æƒ…å ±ã¯AESæš—å·åŒ–ã‚’æ–½ã—ã€å¹³æ–‡ã§ã®ä¿å­˜ã‚’å›é¿
- Firestoreã¸ã®èªè¨¼æƒ…å ±ã®æ°¸ç¶šåŒ–ã¯è¡Œã‚ãªã„
- ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯å‡¦ç†å®Œäº†å¾Œã«å³åº§ã«ç ´æ£„ï¼ˆ`finally`ãƒ–ãƒ­ãƒƒã‚¯ï¼‰
- APIãƒ«ãƒ¼ãƒˆã¯èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- Upstash Redis ã«ã‚ˆã‚‹ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã§ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢

### 6.2 ç”»åƒãƒ—ãƒ­ã‚­ã‚·

å¤–éƒ¨ã‚µã‚¤ãƒˆã®ç”»åƒã‚’CORSåˆ¶ç´„ã‚’å›é¿ã—ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚­ã‚·APIã€‚

```
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â†’ /api/proxy-image?url=... â†’ å¤–éƒ¨ç”»åƒã‚µãƒ¼ãƒãƒ¼ â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
```

### 6.3 LINEé€£æº

LINE Messaging API ã‚’ä½¿ç”¨ã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã¨æ—¥æ¬¡é€šçŸ¥ã€‚

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼          API Route             LINE Messaging API
  â”‚                  â”‚                        â”‚
  â”‚â”€â”€ ãƒªãƒ³ã‚¯ã‚³ãƒ¼ãƒ‰ â”€â†’â”‚                        â”‚
  â”‚  ç”Ÿæˆè¦æ±‚        â”‚â”€â”€ lineLinkCodes ä¿å­˜ â”€â”€â†’â”‚
  â”‚â†â”€â”€ ã‚³ãƒ¼ãƒ‰è¿”å´ â”€â”€â”‚                        â”‚
  â”‚                  â”‚                        â”‚
  â”‚  (LINEã§ã‚³ãƒ¼ãƒ‰é€ä¿¡)                       â”‚
  â”‚                  â”‚â†â”€â”€ Webhook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                  â”‚â”€â”€ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç´ä»˜ã‘ â”€â”€â”€â”€â”€â†’â”‚
  â”‚                  â”‚â”€â”€ é€£æºå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â”€â”€â†’â”‚
  â”‚                  â”‚                        â”‚
  â”‚  (æ—¥æ¬¡cronãƒˆãƒªã‚¬ãƒ¼)                        â”‚
  â”‚                  â”‚â”€â”€ ã‚¹ã‚¿ãƒƒãƒ„é€šçŸ¥ â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
```

### 6.4 Stripeæ±ºæ¸ˆ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼          API Route             Stripe
  â”‚                  â”‚                    â”‚
  â”‚â”€â”€ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ â†’â”‚                    â”‚
  â”‚                  â”‚â”€â”€ Sessionä½œæˆ â”€â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ â”€â”‚â†â”€â”€ Session URL â”€â”€â”€â”‚
  â”‚                  â”‚                    â”‚
  â”‚â”€â”€ (Stripeæ±ºæ¸ˆç”»é¢ã§æ”¯æ‰•ã„) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                  â”‚â†â”€â”€ Webhook â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                  â”‚â”€â”€ ãƒ­ãƒ¼ãƒ«æ›´æ–° â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€ Proæœ‰åŠ¹åŒ– â”€â”€â”€â”€â”‚                    â”‚
```

### 6.5 ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆï¼ˆ6ã‚·ãƒ§ãƒƒãƒ—ï¼‰

ãƒãƒ¬ãƒ«å•†å“ã‹ã‚‰6ã¤ã®ã‚·ãƒ§ãƒƒãƒ—ã¸ã®è³¼å…¥ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹ã€‚
è©³ç´°ã¯ [è¨­è¨ˆå›³ãƒ“ãƒ¥ãƒ¼ã‚¢ã€ŒAPIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã€ã‚¿ãƒ–](https://portfolio-seiryuu.vercel.app/projects/darts-lab) ã‚’å‚ç…§ã€‚

```
ãƒãƒ¬ãƒ«è©³ç´° / ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°è©³ç´°
    â†“
AffiliateButton (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³)
    â†“ getShopLinks(barrel)
lib/affiliate.ts â†’ 6ã‚·ãƒ§ãƒƒãƒ—URLç”Ÿæˆ
    â”œâ”€â”€ ãƒ€ãƒ¼ãƒ„ãƒã‚¤ãƒ– (A8.netçµŒç”±)
    â”œâ”€â”€ ã‚¨ã‚¹ãƒ€ãƒ¼ãƒ„
    â”œâ”€â”€ MAXIM
    â”œâ”€â”€ TiTO
    â”œâ”€â”€ æ¥½å¤©å¸‚å ´ (ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆIDä»˜ã)
    â””â”€â”€ Amazon (ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆã‚¿ã‚°ä»˜ã)
```

- `lib/affiliate.ts` â€” `getShopLinks(barrel)` ã§6ã‚·ãƒ§ãƒƒãƒ—ã®URLã‚’ç”Ÿæˆ
- `AffiliateButton.tsx` â€” ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§è³¼å…¥å…ˆé¸æŠã€`target="_blank"` + `rel="noopener noreferrer"`
- `AffiliateBanner.tsx` â€” ã‚µã‚¤ãƒ‰ãƒãƒ¼ç­‰ã«è¡¨ç¤ºã™ã‚‹ã‚·ãƒ§ãƒƒãƒ—ãƒãƒŠãƒ¼

---

## 7. ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆ

```
GitHub Repository
       â”‚
       â”‚ push / merge
       â–¼
   GitHub Actions (CI)
       â”‚
       â”œâ”€â”€ npm run lint          (ESLint)
       â”œâ”€â”€ npm run format:check  (Prettier)
       â”œâ”€â”€ npm run test:unit     (Vitest)
       â””â”€â”€ npm run build         (Next.js ãƒ“ãƒ«ãƒ‰)
       â”‚
       â”‚ CI ãƒ‘ã‚¹å¾Œ
       â–¼
   Vercel CI/CD
       â”‚
       â”œâ”€â”€ Build (next build)
       â”œâ”€â”€ TypeScript å‹ãƒã‚§ãƒƒã‚¯
       â””â”€â”€ Deploy
            â”‚
            â”œâ”€â”€ Static Assets â†’ Vercel CDN (Edge)
            â”œâ”€â”€ Pages â†’ Serverless Functions
            â””â”€â”€ API Routes â†’ Serverless Functions
                  â”‚
                  â””â”€â”€ ç’°å¢ƒå¤‰æ•°ï¼ˆVercel Dashboard ã§ç®¡ç†ï¼‰
```

### 7.1 ç’°å¢ƒå¤‰æ•°ã®åˆ†é¡

| å¤‰æ•°                                       | å…¬é–‹å¯å¦ | ç”¨é€”                                                               |
| ------------------------------------------ | :------: | ------------------------------------------------------------------ |
| `NEXT_PUBLIC_FIREBASE_API_KEY`             |  å…¬é–‹å¯  | Firebase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆSDKåˆæœŸåŒ–ï¼ˆFirebaseã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ä¿è­·ï¼‰ |
| `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`         |  å…¬é–‹å¯  | Firebase Auth ãƒ‰ãƒ¡ã‚¤ãƒ³                                             |
| `NEXT_PUBLIC_FIREBASE_PROJECT_ID`          |  å…¬é–‹å¯  | Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè­˜åˆ¥å­                                        |
| `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`      |  å…¬é–‹å¯  | Storage ãƒã‚±ãƒƒãƒˆ                                                   |
| `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID` |  å…¬é–‹å¯  | FCM é€ä¿¡è€…ID                                                       |
| `NEXT_PUBLIC_FIREBASE_APP_ID`              |  å…¬é–‹å¯  | Firebase ã‚¢ãƒ—ãƒªID                                                  |
| `NEXTAUTH_SECRET`                          | **ç§˜å¯†** | JWTã®ç½²åã‚­ãƒ¼                                                      |
| `NEXTAUTH_URL`                             | **ç§˜å¯†** | NextAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯URL                                           |
| `GOOGLE_APPLICATION_CREDENTIALS`           | **ç§˜å¯†** | Firebase Admin SDK ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ                              |
| `STRIPE_SECRET_KEY`                        | **ç§˜å¯†** | Stripe ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼                                            |
| `STRIPE_WEBHOOK_SECRET`                    | **ç§˜å¯†** | Stripe Webhookç½²åã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ                                     |
| `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`       |  å…¬é–‹å¯  | Stripe å…¬é–‹å¯èƒ½ã‚­ãƒ¼                                                |
| `LINE_CHANNEL_ACCESS_TOKEN`                | **ç§˜å¯†** | LINE Messaging API ãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³                        |
| `LINE_CHANNEL_SECRET`                      | **ç§˜å¯†** | LINE Messaging API ãƒãƒ£ãƒãƒ«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ                            |
| `SENTRY_DSN`                               |  å…¬é–‹å¯  | Sentry ã‚¨ãƒ©ãƒ¼ç›£è¦–ç”¨DSN                                             |
| `SENTRY_AUTH_TOKEN`                        | **ç§˜å¯†** | Sentry ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨ãƒˆãƒ¼ã‚¯ãƒ³                          |
| `ENCRYPTION_KEY`                           | **ç§˜å¯†** | AESæš—å·åŒ–ã‚­ãƒ¼ï¼ˆèªè¨¼æƒ…å ±æš—å·åŒ–ç”¨ï¼‰                                  |
| `CRON_SECRET`                              | **ç§˜å¯†** | Cronã‚¸ãƒ§ãƒ–èªè¨¼ç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ                                       |
| `ADMIN_EMAIL`                              | **ç§˜å¯†** | ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹                                               |
| `NEXT_PUBLIC_AFFILIATE_*`                  |  å…¬é–‹å¯  | ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆé–¢é€£è¨­å®š                                             |

---

## 8. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
darts-app/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx                  # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ sw.ts                     # Service Worker (PWA)
â”‚   â”œâ”€â”€ login/                    # ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â”œâ”€â”€ register/                 # æ–°è¦ç™»éŒ²
â”‚   â”œâ”€â”€ forgot-password/          # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
â”‚   â”œâ”€â”€ darts/                    # ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx              #   ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ new/                  #   æ–°è¦ä½œæˆ
â”‚   â”‚   â”œâ”€â”€ [id]/                 #   è©³ç´°ãƒ»ç·¨é›†
â”‚   â”‚   â””â”€â”€ compare/              #   æ¯”è¼ƒ
â”‚   â”œâ”€â”€ barrels/                  # ãƒãƒ¬ãƒ«DB
â”‚   â”œâ”€â”€ stats/                    # ã‚¹ã‚¿ãƒƒãƒ„è¨˜éŒ²
â”‚   â”‚   â”œâ”€â”€ page.tsx              #   ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ new/                  #   æ‰‹å‹•å…¥åŠ›
â”‚   â”‚   â””â”€â”€ [id]/edit/            #   ç·¨é›†
â”‚   â”œâ”€â”€ articles/                 # è¨˜äº‹
â”‚   â”œâ”€â”€ bookmarks/                # ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯
â”‚   â”œâ”€â”€ discussions/              # æ²ç¤ºæ¿
â”‚   â”œâ”€â”€ shops/                    # ã‚·ãƒ§ãƒƒãƒ—æ¤œç´¢ãƒ»ãƒãƒƒãƒ—
â”‚   â”œâ”€â”€ pricing/                  # æ–™é‡‘ãƒ—ãƒ©ãƒ³
â”‚   â”œâ”€â”€ about/                    # ã‚¢ãƒ—ãƒªæ¦‚è¦
â”‚   â”œâ”€â”€ reports/                  # ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ tools/                    # ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ users/                    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ profile/edit/             # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†
â”‚   â”œâ”€â”€ reference/                # ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
â”‚   â”œâ”€â”€ admin/                    # ç®¡ç†æ©Ÿèƒ½
â”‚   â””â”€â”€ api/                      # APIãƒ«ãƒ¼ãƒˆ
â”‚       â”œâ”€â”€ auth/[...nextauth]/   #   èªè¨¼
â”‚       â”œâ”€â”€ dartslive-stats/      #   è‡ªå‹•ãƒ‡ãƒ¼ã‚¿å–å¾—
â”‚       â”œâ”€â”€ proxy-image/          #   ç”»åƒãƒ—ãƒ­ã‚­ã‚·
â”‚       â”œâ”€â”€ stripe/               #   Stripeæ±ºæ¸ˆ (checkout, portal, webhook)
â”‚       â”œâ”€â”€ line/                  #   LINEé€£æº (link, unlink, webhook, save-dl-credentials)
â”‚       â”œâ”€â”€ cron/                  #   å®šæœŸå®Ÿè¡Œ (daily-stats, dartslive-api-sync)
â”‚       â”œâ”€â”€ goals/                #   ç›®æ¨™ç®¡ç†
â”‚       â”œâ”€â”€ progression/          #   çµŒé¨“å€¤ãƒ»ãƒ¬ãƒ™ãƒ«
â”‚       â”œâ”€â”€ notifications/        #   é€šçŸ¥
â”‚       â”œâ”€â”€ stats-history/        #   ã‚¹ã‚¿ãƒƒãƒ„å±¥æ­´
â”‚       â”œâ”€â”€ stats-calendar/       #   ã‚¹ã‚¿ãƒƒãƒ„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
â”‚       â”œâ”€â”€ og/                   #   OGPç”»åƒç”Ÿæˆ
â”‚       â”œâ”€â”€ shops/                #   ã‚·ãƒ§ãƒƒãƒ— (fetch-url, import-by-line)
â”‚       â”œâ”€â”€ n01-import/           #   N01ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â”‚       â””â”€â”€ admin/                #   ç®¡ç†API (update-role, dartslive-sync, dartslive-history, update-pricing)
â”œâ”€â”€ components/                   # å†åˆ©ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ layout/                   #   Header, Footer
â”‚   â”œâ”€â”€ darts/                    #   DartCard, DartForm, DartDetail
â”‚   â”œâ”€â”€ barrels/                  #   BarrelCard
â”‚   â”œâ”€â”€ stats/                    #   ã‚¹ã‚¿ãƒƒãƒ„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ53ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
â”‚   â”‚   â”œâ”€â”€ AdminApiStatsSection  #     ç®¡ç†è€…å‘ã‘APIé€£æºã‚¹ã‚¿ãƒƒãƒ„
â”‚   â”‚   â”œâ”€â”€ PlayerProfileCard     #     ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆé€šã‚Šåãƒ»ãƒ›ãƒ¼ãƒ ã‚·ãƒ§ãƒƒãƒ—ãƒ»Mapsé€£æºï¼‰
â”‚   â”‚   â”œâ”€â”€ RatingHeroCard        #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° + ãƒ•ãƒ©ã‚¤ãƒˆ + ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ PeriodStatsPanel      #     æœŸé–“ã‚¿ãƒ– + ã‚µãƒãƒªãƒ¼
â”‚   â”‚   â”œâ”€â”€ GameStatsCards        #     01/Cricket/CU ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ä»˜ãï¼‰
â”‚   â”‚   â”œâ”€â”€ DetailedGameStatsCard #     è©³ç´°ã‚²ãƒ¼ãƒ çµ±è¨ˆ
â”‚   â”‚   â”œâ”€â”€ BullStatsCard         #     ãƒ–ãƒ«çµ±è¨ˆ + ãƒ‰ãƒ¼ãƒŠãƒ„/ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ CountUpDeltaChart     #     COUNT-UP Â±å·®åˆ†ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ CountUpAnalysisCard   #     COUNT-UPåˆ†æï¼ˆRtæœŸå¾…å€¤ãƒ¡ãƒˆãƒªã‚¯ã‚¹ + å‰å¾ŒåŠãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ CountUpDeepAnalysisCard #   COUNT-UPæ·±æ˜ã‚Šåˆ†æ
â”‚   â”‚   â”œâ”€â”€ CountUpRoundAnalysisCard #  COUNT-UPãƒ©ã‚¦ãƒ³ãƒ‰åˆ†æ
â”‚   â”‚   â”œâ”€â”€ ZeroOneAnalysisCard   #     01åˆ†æ
â”‚   â”‚   â”œâ”€â”€ ZeroOneConsistencyCard #    01å®‰å®šæ€§åˆ†æ
â”‚   â”‚   â”œâ”€â”€ RatingTargetCard      #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç›®æ¨™åˆ†æ
â”‚   â”‚   â”œâ”€â”€ RatingSimulatorCard   #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”‚   â”œâ”€â”€ RatingMomentumCard    #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‹¢ã„åˆ†æ
â”‚   â”‚   â”œâ”€â”€ RatingBenchmarkCard   #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
â”‚   â”‚   â”œâ”€â”€ MonthlyTrendChart     #     æœˆé–“æ¨ç§»ã‚°ãƒ©ãƒ•
â”‚   â”‚   â”œâ”€â”€ DailyHistoryChart     #     æ—¥åˆ¥å±¥æ­´ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ RollingTrendCard      #     ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒˆãƒ¬ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ RecentGamesChart      #     ç›´è¿‘ã‚²ãƒ¼ãƒ çµæœãƒãƒ£ãƒ¼ãƒˆ + ã‚µãƒãƒªãƒ¼è¡Œï¼ˆé€£ç¶š/æœ€é•·/å®‰å®šåº¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ RecentDaySummary      #     ç›´è¿‘ãƒ—ãƒ¬ã‚¤æ—¥ã‚µãƒãƒªãƒ¼
â”‚   â”‚   â”œâ”€â”€ CalendarGrid          #     ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰
â”‚   â”‚   â”œâ”€â”€ DayDetailPanel        #     æ—¥åˆ¥è©³ç´°ãƒ‘ãƒãƒ«
â”‚   â”‚   â”œâ”€â”€ PlayerDnaCard         #     ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼DNAåˆ†æ
â”‚   â”‚   â”œâ”€â”€ SkillRadarChart       #     ã‚¹ã‚­ãƒ«ãƒ¬ãƒ¼ãƒ€ãƒ¼ï¼ˆè©³ç´°8è»¸ + ç°¡æ˜“5è»¸ / ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¯”è¼ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ DartboardHeatmap      #     ãƒ€ãƒ¼ãƒ„ãƒœãƒ¼ãƒ‰ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—
â”‚   â”‚   â”œâ”€â”€ ScoreDistributionCard #     ã‚¹ã‚³ã‚¢åˆ†å¸ƒ
â”‚   â”‚   â”œâ”€â”€ ConsistencyCard       #     å®‰å®šæ€§ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ PeriodComparisonCard  #     æœŸé–“æ¯”è¼ƒ
â”‚   â”‚   â”œâ”€â”€ GameAveragesCard      #     ã‚²ãƒ¼ãƒ å¹³å‡
â”‚   â”‚   â”œâ”€â”€ BestRecordsCard       #     ãƒ™ã‚¹ãƒˆè¨˜éŒ²
â”‚   â”‚   â”œâ”€â”€ PerformanceInsightsCard #   ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
â”‚   â”‚   â”œâ”€â”€ SpeedAccuracyCard     #     ã‚¹ãƒ”ãƒ¼ãƒ‰/ç²¾åº¦åˆ†æ
â”‚   â”‚   â”œâ”€â”€ SessionFatigueCard    #     ã‚»ãƒƒã‚·ãƒ§ãƒ³ç–²åŠ´åˆ†æ
â”‚   â”‚   â”œâ”€â”€ SensorTrendCard       #     ã‚»ãƒ³ã‚µãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ StreakPatternCard     #     é€£ç¶šãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
â”‚   â”‚   â”œâ”€â”€ AwardsTable           #     ã‚¢ãƒ¯ãƒ¼ãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”‚   â”œâ”€â”€ AwardPaceCard         #     ã‚¢ãƒ¯ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ AwardTrendChart       #     ã‚¢ãƒ¯ãƒ¼ãƒ‰ãƒˆãƒ¬ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ PracticeRecommendationsCard # ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ææ¡ˆ
â”‚   â”‚   â”œâ”€â”€ N01ImportCard         #     N01ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ PercentileChip        #     ä¸Šä½X%ãƒãƒƒã‚¸ï¼ˆå†åˆ©ç”¨å¯èƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ PRSiteSection         #     ãŠã™ã™ã‚ãƒ–ãƒ©ãƒ³ãƒ‰PRã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ StatsLoginDialog      #     DARTSLIVE ãƒ­ã‚°ã‚¤ãƒ³ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ RatingTrendCard       #     ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ³ + å›å¸°ç›´ç·šï¼‰
â”‚   â”‚   â”œâ”€â”€ SessionComparisonCard #    ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¯”è¼ƒï¼ˆç›´è¿‘2å›ã®ãƒ—ãƒ¬ã‚¤æ—¥æ¯”è¼ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ AwardPaceSimpleCard  #     ã‚¢ãƒ¯ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¹äºˆæ¸¬ï¼ˆç°¡æ˜“ç‰ˆï¼‰
â”‚   â”‚   â”œâ”€â”€ GameMixCard          #     ã‚²ãƒ¼ãƒ ãƒŸãƒƒã‚¯ã‚¹åˆ†æ
â”‚   â”‚   â”œâ”€â”€ ConditionCorrelationCard # ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³Ã—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›¸é–¢
â”‚   â”‚   â””â”€â”€ StatsPageContent      #     ã‚¹ã‚¿ãƒƒãƒ„ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
â”‚   â”œâ”€â”€ shops/                    #   ã‚·ãƒ§ãƒƒãƒ—é–¢é€£
â”‚   â”‚   â”œâ”€â”€ ShopCard              #     ã‚·ãƒ§ãƒƒãƒ—ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ ShopMapView           #     åœ°å›³ãƒ“ãƒ¥ãƒ¼
â”‚   â”‚   â”œâ”€â”€ ShopBookmarkDialog    #     ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ ShopListDialog        #     ãƒªã‚¹ãƒˆç®¡ç†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ ShopListChips         #     ãƒªã‚¹ãƒˆãƒãƒƒãƒ—ã‚¹
â”‚   â”‚   â”œâ”€â”€ ShopViewToggle        #     è¡¨ç¤ºåˆ‡æ›¿
â”‚   â”‚   â”œâ”€â”€ TagManageDialog       #     ã‚¿ã‚°ç®¡ç†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â””â”€â”€ LineImportDialog      #     LINEçµŒç”±ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ affiliate/                #   ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆï¼ˆAffiliateBanner, AffiliateButtonï¼‰
â”‚   â”œâ”€â”€ discussions/              #   æ²ç¤ºæ¿ï¼ˆDiscussionCard, CategoryTabs, ReplyForm, ReplyListï¼‰
â”‚   â”œâ”€â”€ goals/                    #   ç›®æ¨™ç®¡ç†ï¼ˆGoalCard, GoalSection, GoalSettingDialog, GoalAchievedDialogï¼‰
â”‚   â”œâ”€â”€ progression/              #   çµŒé¨“å€¤ãƒ»ãƒ¬ãƒ™ãƒ«ï¼ˆXpBar, LevelUpSnackbar, AchievementList, XpHistoryListï¼‰
â”‚   â”œâ”€â”€ notifications/            #   é€šçŸ¥ï¼ˆNotificationBell, PushOptIn, XpNotificationDialogï¼‰
â”‚   â”œâ”€â”€ reports/                  #   ãƒ¬ãƒãƒ¼ãƒˆï¼ˆWeeklyReportCard, MonthlyReportCardï¼‰
â”‚   â”œâ”€â”€ articles/                 #   ArticleCard, MarkdownContent
â”‚   â”œâ”€â”€ comment/                  #   CommentList, CommentForm
â”‚   â”œâ”€â”€ auth/                     #   LoginForm, RegisterForm
â”‚   â””â”€â”€ home/                     #   ãƒ›ãƒ¼ãƒ ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                          # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ auth.ts                   #   NextAuthè¨­å®š
â”‚   â”œâ”€â”€ firebase.ts               #   Firebase Client SDK
â”‚   â”œâ”€â”€ firebase-admin.ts         #   Firebase Admin SDK
â”‚   â”œâ”€â”€ darts-parts.ts            #   ãƒ‘ãƒ¼ãƒ„ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ calc-totals.ts            #   ã‚¹ãƒšãƒƒã‚¯è¨ˆç®—
â”‚   â”œâ”€â”€ recommend-barrels.ts      #   ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ comparison.ts             #   æ¯”è¼ƒãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ dartslive-rating.ts       #   DARTSLIVE ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç®—ï¼ˆPPD/MPRâ‡”Rtå¤‰æ›ï¼‰
â”‚   â”œâ”€â”€ dartslive-colors.ts       #   ãƒ•ãƒ©ã‚¤ãƒˆãƒ»ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ©ãƒ¼å®šç¾©
â”‚   â”œâ”€â”€ dartslive-percentile.ts   #   ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«åˆ†å¸ƒãƒ‡ãƒ¼ã‚¿ + æ¨å®šé–¢æ•°
â”‚   â”œâ”€â”€ dartslive-api.ts          #   DARTSLIVE APIé€£æº
â”‚   â”œâ”€â”€ dartslive-reference.ts    #   DARTSLIVEãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ dartslive-scraper.ts      #   å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿é€£æºï¼ˆè‡ªå‹•ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰
â”‚   â”œâ”€â”€ permissions.ts            #   ãƒ­ãƒ¼ãƒ«åˆ¥æ¨©é™åˆ¤å®šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ affiliate.ts              #   ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ goals.ts                  #   ç›®æ¨™ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ crypto.ts                 #   æš—å·åŒ–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆAESï¼‰
â”‚   â”œâ”€â”€ line.ts                   #   LINE Messaging APIé€£æº
â”‚   â”œâ”€â”€ stripe.ts                 #   Stripeæ±ºæ¸ˆé€£æº
â”‚   â”œâ”€â”€ session-analysis.ts       #   ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†æ
â”‚   â”œâ”€â”€ sensor-analysis.ts        #   ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿åˆ†æ
â”‚   â”œâ”€â”€ countup-round-analysis.ts #   COUNT-UPãƒ©ã‚¦ãƒ³ãƒ‰åˆ†æ
â”‚   â”œâ”€â”€ heatmap-data.ts           #   ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”‚   â”œâ”€â”€ practice-recommendations.ts #  ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ææ¡ˆãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ stats-math.ts             #   çµ±è¨ˆè¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ stats-trend.ts            #   ã‚¹ã‚¿ãƒƒãƒ„ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
â”‚   â”œâ”€â”€ award-analysis.ts         #   ã‚¢ãƒ¯ãƒ¼ãƒ‰åˆ†æ
â”‚   â”œâ”€â”€ dartout-analysis.ts       #   ãƒ€ãƒ¼ãƒ„ã‚¢ã‚¦ãƒˆåˆ†æ
â”‚   â”œâ”€â”€ dartout-labels.ts         #   ãƒ€ãƒ¼ãƒ„ã‚¢ã‚¦ãƒˆãƒ©ãƒ™ãƒ«å®šç¾©
â”‚   â”œâ”€â”€ report-data.ts            #   ãƒ¬ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”‚   â”œâ”€â”€ n01-parser.ts             #   N01ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ã‚µãƒ¼
â”‚   â”œâ”€â”€ shop-import.ts            #   ã‚·ãƒ§ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ line-stations.ts          #   è·¯ç·šåãƒ»ã‚«ãƒ©ãƒ¼å®šç¾©
â”‚   â”œâ”€â”€ geocode.ts                #   ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ image-proxy.ts            #   ç”»åƒãƒ—ãƒ­ã‚­ã‚·
â”‚   â”œâ”€â”€ api-middleware.ts         #   APIãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”œâ”€â”€ rate-limit.ts             #   ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆï¼ˆUpstash Redisï¼‰
â”‚   â”œâ”€â”€ push-notifications.ts     #   ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
â”‚   â”œâ”€â”€ progression/              #   çµŒé¨“å€¤ãƒ»ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”œâ”€â”€ xp-engine.ts          #     XPã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ xp-rules.ts           #     XPãƒ«ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â”œâ”€â”€ ranks.ts              #     ãƒ©ãƒ³ã‚¯å®šç¾©
â”‚   â”‚   â”œâ”€â”€ achievements.ts       #     å®Ÿç¸¾å®šç¾©
â”‚   â”‚   â””â”€â”€ milestones.ts         #     ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³å®šç¾©
â”‚   â””â”€â”€ hooks/                    #   ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ types/                        # å‹å®šç¾©
â”‚   â”œâ”€â”€ index.ts                  #   å…±é€šå‹
â”‚   â””â”€â”€ next-auth.d.ts            #   NextAuthå‹æ‹¡å¼µ
â”œâ”€â”€ stories/                      # Storybook stories + ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ scripts/                      # é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ docs/                         # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ public/                       # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
```
